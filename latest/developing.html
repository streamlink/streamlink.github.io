<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="API Guide" href="api_guide.html" /><link rel="prev" title="Migrations" href="migrations.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
  <link rel="apple-touch-icon" sizes="180x180" href="/_static/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/_static/favicon-16x16.png">
  <link rel="shortcut icon" href="/_static/favicon.ico">
  <link rel="manifest" href="/_static/site.webmanifest">
  <meta property="og:title" content="Developing - Streamlink 6.5.1+48.g15da679d documentation">
  <meta property="og:description" content="A command-line utility that extracts streams from various services and pipes them into a video player of choice.">
  <meta property="og:image" content="/_static/opengraph-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
        <title>Developing - Streamlink 6.5.1+48.g15da679d documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/custom.css?v=152736fe" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/fontawesome.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/solid.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/brands.min.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Streamlink 6.5.1+48.g15da679d documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand centered" href="index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/icon.svg" alt="Streamlink"/>
    <img class="sidebar-logo only-dark" src="_static/icon.svg" alt="Streamlink"/>
  </div>
  <p class="sidebar-brand-text">Streamlink</p>
  <p class="sidebar-brand-oneliner">A command-line utility that extracts streams from various services and pipes them into a video player of choice.</p>
</a>
<div class="sidebar-versions centered" role="note" aria-label="versions">
  <pre class="sidebar-versions-current">6.5.1+48.g15da679d</pre>
  <dl class="sidebar-versions-others">
    <dd><a href="/developing.html" class="">Stable</a></dd>
    <dd><a href="/latest/developing.html" class="version-current">Latest</a></dd>
  </dl>
</div><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="cli.html">Command-Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Command-Line Interface</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="cli.html">Command-line usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/tutorial.html">Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/config.html">Configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/plugin-sideloading.html">Plugin sideloading</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/protocols.html">Streaming protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/proxy.html">Proxy support</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/metadata.html">Metadata</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="cli/plugins.html">Plugin specific usage</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Plugin specific usage</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="cli/plugins/crunchyroll.html">Crunchyroll</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli/plugins/twitch.html">Twitch</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="players.html">Players</a></li>
<li class="toctree-l1"><a class="reference internal" href="deprecations.html">Deprecations</a></li>
<li class="toctree-l1"><a class="reference internal" href="migrations.html">Migrations</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Developing</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api_guide.html">API Guide</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of API Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="api_guide/quickstart.html">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_guide/validate.html">Validation schemas</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="api/streamlink.html">Streamlink</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/session.html">Session</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/plugin.html">Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/options.html">Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cache.html">Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/validate.html">Validation schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/stream.html">Stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/webbrowser.html">Webbrowser</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="donate.html">Donating</a></li>
<li class="toctree-l1"><a class="reference internal" href="applications.html">Streamlink Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="thirdparty.html">Third Party Applications</a></li>
</ul>

</div><div class="github-buttons centered">
  <a href="https://github.com/streamlink/streamlink"
    class="github-button"
    data-icon="octicon-mark-github"
    data-count-href="/streamlink/streamlink/stargazers"
    data-count-api="/repos/streamlink/streamlink#stargazers_count">Github</a>
  <a href="https://github.com/streamlink/streamlink/issues"
    class="github-button"
    data-icon="octicon-issue-opened">Issues</a>
  <script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/streamlink/streamlink/edit/master/docs/developing.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          
  
    <div class="admonition important version-warning">
      <p class="admonition-title">You are reading the documentation for the in-development version of Streamlink.</p>
    </div>
  
  <section id="developing">
<h1>Developing<a class="headerlink" href="#developing" title="Link to this heading">#</a></h1>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Link to this heading">#</a></h2>
<section id="setting-up-the-repository">
<h3>Setting up the repository<a class="headerlink" href="#setting-up-the-repository" title="Link to this heading">#</a></h3>
<p>In order to start working on Streamlink, you must first install the latest stable version of <code class="docutils literal notranslate"><span class="pre">git</span></code>, optionally fork the
repository on Github onto your account if you want to submit changes in a pull request, and then locally clone the repository.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>streamlink
<span class="nb">cd</span><span class="w"> </span>streamlink
git<span class="w"> </span>clone<span class="w"> </span>--origin<span class="o">=</span>upstream<span class="w"> </span><span class="s1">&#39;https://github.com/streamlink/streamlink.git&#39;</span><span class="w"> </span>.
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>fork<span class="w"> </span><span class="s1">&#39;git@github.com:&lt;YOUR-USERNAME&gt;/streamlink.git&#39;</span>
git<span class="w"> </span>remote<span class="w"> </span>-v
git<span class="w"> </span>fetch<span class="w"> </span>--all
</pre></div>
</div>
<p>When submitting a pull request, commit and push your changes onto a different branch.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>master
git<span class="w"> </span>pull<span class="w"> </span>upstream<span class="w"> </span>master
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>new/feature/or/bugfix/branch
git<span class="w"> </span>add<span class="w"> </span>./foo
git<span class="w"> </span>commit
git<span class="w"> </span>push<span class="w"> </span>fork<span class="w"> </span>new/feature/or/bugfix/branch
</pre></div>
</div>
</section>
<section id="setting-up-a-new-environment">
<h3>Setting up a new environment<a class="headerlink" href="#setting-up-a-new-environment" title="Link to this heading">#</a></h3>
<p>While working on any kind of python-based project, it is usually best to do this in a virtual environment which is isolated from
the Python environment of the host system. This ensures that development can be done in a clean space which is free of version
conflicts and other unrelated packages.</p>
<p>First, make sure that you have the latest stable versions of Python and <a class="reference external" href="https://pip.pypa.io/en/stable/">pip</a> installed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>--version
pip<span class="w"> </span>--version
</pre></div>
</div>
<p>Then set up a new virtual environment using <a class="reference external" href="https://docs.python.org/3/library/venv.html">venv</a> of the Python standard library:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace ~/venvs/streamlink with your path of choice and give it a proper name</span>
python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>~/venvs/streamlink
</pre></div>
</div>
<p>Now activate the virtual environment by sourcing the activation shell script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>~/venvs/streamlink/bin/activate

<span class="c1"># non-POSIX shells have their own activation script, e.g. FISH</span>
<span class="nb">source</span><span class="w"> </span>~/venvs/streamlink/bin/activate.fish
</pre></div>
</div>
<div class="highlight-pwsh notranslate"><div class="highlight"><pre><span></span><span class="c"># on Windows, activation scripts are located in the Scripts/ subdirectory instead of bin/</span>
<span class="p">~\</span><span class="n">venvs</span><span class="p">\</span><span class="n">streamlink</span><span class="p">\</span><span class="n">Scripts</span><span class="p">\</span><span class="n">Activate</span><span class="p">.</span><span class="n">ps1</span>
</pre></div>
</div>
</section>
<section id="installing-streamlink">
<h3>Installing Streamlink<a class="headerlink" href="#installing-streamlink" title="Link to this heading">#</a></h3>
<p>After activating the new virtual environment, Streamlink's development dependencies and Streamlink itself need to be installed.
Regular development dependencies and documentation related dependencies are listed in the text files shown below and need to
be installed separately.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># install additional dependencies</span>
pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>-r<span class="w"> </span>dev-requirements.txt
pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>-r<span class="w"> </span>docs-requirements.txt

<span class="c1"># install Streamlink in &quot;editable&quot; mode</span>
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.

<span class="c1"># validate that Streamlink is working</span>
streamlink<span class="w"> </span>--loglevel<span class="o">=</span>debug
</pre></div>
</div>
</section>
</section>
<section id="validating-changes">
<h2>Validating changes<a class="headerlink" href="#validating-changes" title="Link to this heading">#</a></h2>
<p>Before submitting a pull request, run tests, perform code linting and build the documentation on your system first, to see if
your changes contain any mistakes or errors. This will be done automatically for each pull request on each change, but
performing these checks locally avoids unnecessary build failures.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># run automated tests</span>
pytest
<span class="c1"># or just run a subset of all tests</span>
pytest<span class="w"> </span>path/to/test-file.py::TestClassName::test_method_name<span class="w"> </span>...

<span class="c1"># check code for linting errors</span>
ruff<span class="w"> </span>.
<span class="c1"># check code for typing errors</span>
mypy

<span class="c1"># build the documentation</span>
make<span class="w"> </span>--directory<span class="o">=</span>docs<span class="w"> </span>clean<span class="w"> </span>html
<span class="nv">$BROWSER</span><span class="w"> </span>./docs/_build/html/index.html
</pre></div>
</div>
</section>
<section id="code-style">
<h2>Code style<a class="headerlink" href="#code-style" title="Link to this heading">#</a></h2>
<p>Streamlink uses <a class="reference external" href="https://github.com/charliermarsh/ruff#readme">Ruff</a> as primary code linting tool and the project aims to use best practices for achieving great
code readability with minimal git diffs, as detailed in <span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0008/"><strong>PEP 8</strong></a> and implemented in related linting tools, such as <a class="reference external" href="https://black.readthedocs.io/en/stable/the_black_code_style/current_style.html">Black</a>.</p>
<p>These are the best practices most likely to be relevant to plugin authors:</p>
<ol class="arabic">
<li><p><a class="reference external" href="https://peps.python.org/pep-0008/#imports">Import order according to PEP8</a></p></li>
<li><p><a class="reference external" href="https://peps.python.org/pep-0008/#indentation">Indentation of 4 spaces per level</a></p></li>
<li><p><a class="reference external" href="https://black.readthedocs.io/en/stable/the_black_code_style/current_style.html#strings">Double quotes for all string literals</a></p></li>
<li><p><a class="reference external" href="https://github.com/streamlink/streamlink/blob/master/pyproject.toml">Line length of at most 128 characters</a></p></li>
<li><p><a class="reference external" href="https://black.readthedocs.io/en/stable/the_black_code_style/current_style.html#how-black-wraps-lines">Balanced line wrapping for readability</a></p></li>
<li><p><a class="reference external" href="https://peps.python.org/pep-0008/#blank-lines">Blank lines</a></p></li>
<li><p><a class="reference external" href="https://peps.python.org/pep-0008/#comments">Comments</a></p></li>
<li><p><a class="reference external" href="https://peps.python.org/pep-0008/#should-a-line-break-before-or-after-a-binary-operator">Line breaks and binary operators</a></p></li>
<li><p>New indented line for each bracket item (args, lists, etc.) in multi-line definitions, with trailing comma</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># incorrect:</span>
<span class="n">schema</span><span class="o">=</span><span class="n">validate</span><span class="o">.</span><span class="n">Schema</span><span class="p">(</span>
    <span class="n">validate</span><span class="o">.</span><span class="n">parse_json</span><span class="p">(),</span> <span class="p">[{</span>
        <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;bar&quot;</span><span class="p">:</span> <span class="n">validate</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="n">schema</span><span class="o">=</span><span class="s2">&quot;https&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">validate</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.m3u8&quot;</span><span class="p">))},</span> <span class="s2">&quot;baz&quot;</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">}]</span>
<span class="p">)</span>

<span class="c1"># correct:</span>
<span class="n">schema</span><span class="o">=</span><span class="n">validate</span><span class="o">.</span><span class="n">Schema</span><span class="p">(</span>
    <span class="n">validate</span><span class="o">.</span><span class="n">parse_json</span><span class="p">(),</span>
    <span class="p">[{</span>
        <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;bar&quot;</span><span class="p">:</span> <span class="n">validate</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="n">schema</span><span class="o">=</span><span class="s2">&quot;https&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">validate</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.m3u8&quot;</span><span class="p">)),</span>
        <span class="p">},</span>
        <span class="s2">&quot;baz&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">}],</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<p>It might be helpful to new plugin authors to pick a small and recently modified existing plugin to use as an initial
template from which to work. If care is taken to preserve existing blank lines during modification, the main plugin
structure should be compliant-ready for <a class="reference internal" href="#validating-changes">linting</a>.</p>
</section>
<section id="plugins">
<h2>Plugins<a class="headerlink" href="#plugins" title="Link to this heading">#</a></h2>
<section id="adding-plugins">
<h3>Adding plugins<a class="headerlink" href="#adding-plugins" title="Link to this heading">#</a></h3>
<ol class="arabic">
<li><p>Implement the plugin in <code class="docutils literal notranslate"><span class="pre">src/streamlink/plugins/pluginname.py</span></code>, similar to already existing plugins.</p>
<p>Check the git log for recently added or modified plugins to help you get an overview of what's needed to properly implement
a plugin. A complete guide is currently not available.</p>
<p>Each plugin class requires at least one <code class="docutils literal notranslate"><span class="pre">pluginmatcher</span></code> decorator which defines the URL regex, matching priority
and an optional name.</p>
<p>Plugins need to implement the <a class="reference internal" href="api/plugin.html#streamlink.plugin.Plugin._get_streams" title="streamlink.plugin.Plugin._get_streams"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_get_streams()</span></code></a> method which must return
<code class="docutils literal notranslate"><span class="pre">Mapping[str,Stream]</span> <span class="pre">|</span> <span class="pre">Iterable[Tuple[str,Stream]]</span> <span class="pre">|</span> <span class="pre">Iterator[Tuple[str,Stream]]</span> <span class="pre">|</span> <span class="pre">None</span></code>.
<code class="docutils literal notranslate"><span class="pre">Stream</span></code> is the base class of <a class="reference internal" href="api/stream.html#streamlink.stream.HTTPStream" title="streamlink.stream.HTTPStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPStream</span></code></a>,
<a class="reference internal" href="api/stream.html#streamlink.stream.HLSStream" title="streamlink.stream.HLSStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">HLSStream</span></code></a> and <a class="reference internal" href="api/stream.html#streamlink.stream.DASHStream" title="streamlink.stream.DASHStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">DASHStream</span></code></a>.</p>
<p>Plugins also require metadata which will be read when building the documentation. This metadata contains information about
the plugin, e.g. which URLs it accepts, which kind of streams it returns, whether content is region-locked, or if any kind of
account or subscription is needed for watching the content, etc. This metadata needs to be set as a header comment at
the beginning of the plugin file, in the following format (order of items is important):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">$description A brief description of the website, streaming service, etc.</span>
<span class="sd">$url A URL which matches the plugin. No http:// or https:// scheme prefixes allowed.</span>
<span class="sd">$url Multiple URLs can be set. Duplicates are not allowed.</span>
<span class="sd">$type The type of content. Needs to be either &quot;live&quot;, &quot;vod&quot;, or &quot;live, vod&quot;, without quotes.</span>
<span class="sd">$region A comma-separated list of countries if region-lock applies. (optional)</span>
<span class="sd">$account A brief note about account or subscription requirements. (optional)</span>
<span class="sd">$notes Further short notes that may be useful. (optional)</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</li>
<li><p>Add at least tests for the URL regex matching in <code class="docutils literal notranslate"><span class="pre">tests/plugins/test_pluginname.py</span></code>.</p>
<p>To do so, import the <code class="docutils literal notranslate"><span class="pre">PluginCanHandleUrl</span></code> test base class from <code class="docutils literal notranslate"><span class="pre">tests.plugins</span></code>, subclass it with a proper name, add
the <code class="docutils literal notranslate"><span class="pre">__plugin__</span></code> class attribute and add all URLs required for testing the plugin matchers to the <code class="docutils literal notranslate"><span class="pre">should_match</span></code> list.</p>
<p>The optional <code class="docutils literal notranslate"><span class="pre">should_not_match</span></code> negative matching list should only contain URLs which the plugin should actively not match,
which means generic negative-matches are not allowed here, as they will already get added by the plugin test configuration.</p>
<p>In addition to the positive matching list, <code class="docutils literal notranslate"><span class="pre">should_match_groups</span></code> is an optional list for testing capture groups values for
given URL inputs. It's a list of tuples where the first tuple item is a URL and the second item either a dictionary of regex
capture group names and values (excluding <code class="docutils literal notranslate"><span class="pre">None</span></code> values), or a tuple of unnamed capture group values. URLs from the
<code class="docutils literal notranslate"><span class="pre">should_match_groups</span></code> list automatically get added to <code class="docutils literal notranslate"><span class="pre">should_match</span></code> and don't need to be added twice.</p>
<p>If the plugin defines named matchers, then URLs in the test fixtures must be tuples of the matcher name and the URL itself.
Unnamed matchers must not match named URL test fixtures and vice versa.</p>
<p>Every plugin matcher must have at least one URL test fixture that matches.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">streamlink.plugins.pluginfile</span> <span class="kn">import</span> <span class="n">MyPluginClassName</span>
<span class="kn">from</span> <span class="nn">tests.plugins</span> <span class="kn">import</span> <span class="n">PluginCanHandleUrl</span>


<span class="k">class</span> <span class="nc">TestPluginCanHandleUrlMyPluginClassName</span><span class="p">(</span><span class="n">PluginCanHandleUrl</span><span class="p">):</span>
    <span class="n">__plugin__</span> <span class="o">=</span> <span class="n">MyPluginClassName</span>

    <span class="n">should_match</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;https://host/path/one&quot;</span><span class="p">,</span>
        <span class="p">(</span><span class="s2">&quot;specific-path-matcher&quot;</span><span class="p">,</span> <span class="s2">&quot;https://host/path/two&quot;</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="n">should_match_groups</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;https://host/stream/123&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;stream&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">}),</span>
        <span class="p">(</span><span class="s2">&quot;https://host/stream/456/foo&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;456&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">)),</span>
        <span class="p">((</span><span class="s2">&quot;user-matcher&quot;</span><span class="p">,</span> <span class="s2">&quot;https://host/user/one&quot;</span><span class="p">),</span> <span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;one&quot;</span><span class="p">}),</span>
        <span class="p">((</span><span class="s2">&quot;user-matcher&quot;</span><span class="p">,</span> <span class="s2">&quot;https://host/user/two&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)),</span>
        <span class="p">((</span><span class="s2">&quot;user-matcher&quot;</span><span class="p">,</span> <span class="s2">&quot;https://host/user/two/foo&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">)),</span>
    <span class="p">]</span>

    <span class="n">should_not_match</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;https://host/path/three&quot;</span><span class="p">,</span>
    <span class="p">]</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="removing-plugins">
<h3>Removing plugins<a class="headerlink" href="#removing-plugins" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Remove the plugin file from <code class="docutils literal notranslate"><span class="pre">src/streamlink/plugins/</span></code> and the test file from <code class="docutils literal notranslate"><span class="pre">tests/plugins/</span></code></p></li>
</ol>
</section>
</section>
</section>


        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="api_guide.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">API Guide</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="migrations.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Migrations</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Streamlink
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Developing</a><ul>
<li><a class="reference internal" href="#setup">Setup</a><ul>
<li><a class="reference internal" href="#setting-up-the-repository">Setting up the repository</a></li>
<li><a class="reference internal" href="#setting-up-a-new-environment">Setting up a new environment</a></li>
<li><a class="reference internal" href="#installing-streamlink">Installing Streamlink</a></li>
</ul>
</li>
<li><a class="reference internal" href="#validating-changes">Validating changes</a></li>
<li><a class="reference internal" href="#code-style">Code style</a></li>
<li><a class="reference internal" href="#plugins">Plugins</a><ul>
<li><a class="reference internal" href="#adding-plugins">Adding plugins</a></li>
<li><a class="reference internal" href="#removing-plugins">Removing plugins</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=50813ae3"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="_static/design-tabs.js?v=36754332"></script>
    </body>
</html>